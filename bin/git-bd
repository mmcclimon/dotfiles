#!/usr/bin/env perl
use strict;
use warnings;

# determine branch name (prefer main, default to master)
qx{git rev-parse --verify --quiet main};
my $main = $? ? 'master' : 'main';

chomp(my $sha = qx{git merge-base HEAD $main});
exec 'git', 'diff', @ARGV, "$sha..HEAD";
